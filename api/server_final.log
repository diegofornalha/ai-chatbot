/home/suthub/.claude/claude-cto/.venv/lib/python3.11/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
{"timestamp": "2025-09-03T11:10:48.963879Z", "level": "INFO", "logger": "stability_monitor", "message": "Circuit breaker 'claude_sdk' registrado", "module": "stability_monitor", "function": "register_circuit_breaker", "line": 173, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:48.964066Z", "level": "INFO", "logger": "stability_monitor", "message": "Circuit breaker 'session_operations' registrado", "module": "stability_monitor", "function": "register_circuit_breaker", "line": 173, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:48.964185Z", "level": "INFO", "logger": "fallback_system", "message": "Fallback registrado para 'chat': cached_response", "module": "fallback_system", "function": "register_fallback", "line": 119, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:48.964281Z", "level": "INFO", "logger": "fallback_system", "message": "Fallback registrado para 'chat': mock_response", "module": "fallback_system", "function": "register_fallback", "line": 119, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:48.964353Z", "level": "INFO", "logger": "fallback_system", "message": "Fallback registrado para 'create_session': cached_response", "module": "fallback_system", "function": "register_fallback", "line": 119, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:48.964435Z", "level": "INFO", "logger": "fallback_system", "message": "Fallback registrado para 'create_session': mock_response", "module": "fallback_system", "function": "register_fallback", "line": 119, "process_id": 2783414, "thread_id": 139842666655808}
INFO:     Started server process [2783414]
INFO:     Waiting for application startup.
{"timestamp": "2025-09-03T11:10:49.036979Z", "level": "INFO", "logger": "__main__", "message": "Iniciando Claude Chat API...", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "app_startup", "component": "server"}}
{"timestamp": "2025-09-03T11:10:49.037344Z", "level": "INFO", "logger": "claude_handler", "message": "Claude Handler inicializado com pool de conex√µes", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "handler_init", "component": "claude_handler", "pool_config": {"max_size": 10, "min_size": 2, "max_age_minutes": 60, "max_uses": 100}}}
{"timestamp": "2025-09-03T11:10:49.037505Z", "level": "INFO", "logger": "analytics_service", "message": "Analytics Service inicializado", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "analytics_init", "component": "analytics_service", "claude_projects_path": "/home/suthub/.claude/projects"}}
{"timestamp": "2025-09-03T11:10:49.037661Z", "level": "INFO", "logger": "ClaudeCodeSessionManager", "message": "Task scheduler iniciado", "module": "session_manager", "function": "_start_scheduler", "line": 187, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.037786Z", "level": "INFO", "logger": "ClaudeCodeSessionManager", "message": "Gerenciador de sess√µes iniciado", "module": "session_manager", "function": "start", "line": 62, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.037907Z", "level": "INFO", "logger": "claude_handler", "message": "ClaudeHandler iniciado com sucesso", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.037994Z", "level": "INFO", "logger": "__main__", "message": "ClaudeHandler iniciado com sucesso", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.038086Z", "level": "INFO", "logger": "session_recovery", "message": "Sistema de recupera√ß√£o iniciado com sucesso", "module": "session_recovery", "function": "start", "line": 39, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.038182Z", "level": "INFO", "logger": "session_recovery", "message": "Gerenciador de recupera√ß√£o iniciado", "module": "session_recovery", "function": "start", "line": 313, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.038255Z", "level": "INFO", "logger": "__main__", "message": "Sistema de recupera√ß√£o de sess√µes ativado", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "recovery_system_started", "recovery_timeout": 86400}}
{"timestamp": "2025-09-03T11:10:49.038338Z", "level": "INFO", "logger": "__main__", "message": "Verificando conectividade com Claude SDK...", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "sdk_connectivity_check", "component": "claude_sdk"}}
{"timestamp": "2025-09-03T11:10:49.038450Z", "level": "INFO", "logger": "rate_limiter", "message": "üìù Rate limiting em mem√≥ria (sem Redis configurado)", "module": "rate_limiter", "function": "initialize", "line": 271, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.038660Z", "level": "INFO", "logger": "security_middleware", "message": "‚úÖ Security middleware inicializado", "module": "security_middleware", "function": "_initialize", "line": 56, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.038809Z", "level": "INFO", "logger": "claude_handler", "message": "Criando nova sess√£o", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "session_create_start", "session_id": "test", "has_config": false}}
{"timestamp": "2025-09-03T11:10:49.038925Z", "level": "INFO", "logger": "ClaudeCodeSessionManager", "message": "Sess√£o registrada: test", "module": "session_manager", "function": "register_session", "line": 247, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.048582Z", "level": "INFO", "logger": "claude_handler", "message": "Novo cliente criado", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "client_created", "pool_size": 0}}
{"timestamp": "2025-09-03T11:10:49.048956Z", "level": "INFO", "logger": "claude_handler", "message": "Sess√£o criada com sucesso", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "session_created", "session_id": "test", "config": {"system_prompt_length": 0, "allowed_tools_count": 0, "max_turns": null, "permission_mode": "acceptEdits", "cwd": null}}}
{"timestamp": "2025-09-03T11:10:49.049308Z", "level": "INFO", "logger": "claude_handler", "message": "Destruindo sess√£o", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "session_destroy_start", "session_id": "test"}}
{"timestamp": "2025-09-03T11:10:49.049622Z", "level": "WARNING", "logger": "claude_handler", "message": "Erro ao desconectar cliente, continuando remo√ß√£o", "module": "logging_config", "function": "warning", "line": 107, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "client_disconnect_error", "session_id": "test", "error_type": "RuntimeError", "error_message": "Attempted to exit cancel scope in a different task than it was entered in"}}
{"timestamp": "2025-09-03T11:10:49.049797Z", "level": "INFO", "logger": "ClaudeCodeSessionManager", "message": "Sess√£o removida: test", "module": "session_manager", "function": "unregister_session", "line": 257, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:10:49.049910Z", "level": "INFO", "logger": "claude_handler", "message": "Sess√£o destru√≠da com sucesso", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "session_destroyed", "session_id": "test"}}
{"timestamp": "2025-09-03T11:10:49.050046Z", "level": "INFO", "logger": "__main__", "message": "Claude SDK conectado com sucesso", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "sdk_connected", "component": "claude_sdk"}}
{"timestamp": "2025-09-03T11:10:49.050177Z", "level": "INFO", "logger": "__main__", "message": "Claude Chat API iniciada com sucesso", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "app_ready", "component": "server"}}
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
{"timestamp": "2025-09-03T11:10:56.770572Z", "level": "INFO", "logger": "exception_middleware", "message": "REQUEST_START: GET /health/detailed", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1", "extra": {"method": "GET", "url": "http://localhost:8000/health/detailed", "path": "/health/detailed", "query_params": {}, "headers": {"host": "localhost:8000", "user-agent": "curl/7.88.1", "accept": "*/*"}, "client_ip": "127.0.0.1", "user_agent": "curl/7.88.1", "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173"}}
{"timestamp": "2025-09-03T11:10:56.872551Z", "level": "INFO", "logger": "claude_handler", "message": "Criando nova sess√£o", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1", "extra": {"event": "session_create_start", "session_id": "health_check_1756897856", "has_config": false, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173"}}
{"timestamp": "2025-09-03T11:10:56.872893Z", "level": "INFO", "logger": "ClaudeCodeSessionManager", "message": "Sess√£o registrada: health_check_1756897856", "module": "session_manager", "function": "register_session", "line": 247, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1"}
{"timestamp": "2025-09-03T11:10:56.882618Z", "level": "INFO", "logger": "claude_handler", "message": "Novo cliente criado", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1", "extra": {"event": "client_created", "pool_size": 0, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173"}}
{"timestamp": "2025-09-03T11:10:56.883045Z", "level": "INFO", "logger": "claude_handler", "message": "Sess√£o criada com sucesso", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1", "extra": {"event": "session_created", "session_id": "health_check_1756897856", "config": {"system_prompt_length": 0, "allowed_tools_count": 0, "max_turns": null, "permission_mode": "acceptEdits", "cwd": null}, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173"}}
{"timestamp": "2025-09-03T11:10:56.883410Z", "level": "INFO", "logger": "claude_handler", "message": "Destruindo sess√£o", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1", "extra": {"event": "session_destroy_start", "session_id": "health_check_1756897856", "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173"}}
{"timestamp": "2025-09-03T11:10:56.883678Z", "level": "WARNING", "logger": "claude_handler", "message": "Erro ao desconectar cliente, continuando remo√ß√£o", "module": "logging_config", "function": "warning", "line": 107, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1", "extra": {"event": "client_disconnect_error", "session_id": "health_check_1756897856", "error_type": "RuntimeError", "error_message": "Attempted to exit cancel scope in a different task than it was entered in", "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173"}}
{"timestamp": "2025-09-03T11:10:56.883857Z", "level": "INFO", "logger": "ClaudeCodeSessionManager", "message": "Sess√£o removida: health_check_1756897856", "module": "session_manager", "function": "unregister_session", "line": 257, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1"}
{"timestamp": "2025-09-03T11:10:56.883980Z", "level": "INFO", "logger": "claude_handler", "message": "Sess√£o destru√≠da com sucesso", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1", "extra": {"event": "session_destroyed", "session_id": "health_check_1756897856", "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173"}}
{"timestamp": "2025-09-03T11:10:56.885133Z", "level": "INFO", "logger": "exception_middleware", "message": "REQUEST_SUCCESS: GET /health/detailed - 200", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173", "client_ip": "127.0.0.1", "extra": {"status_code": 200, "duration_ms": 114.57633972167969, "response_size": "1652", "request_id": "aa3d722e-4798-4d26-a60d-907d2bf70173"}}
{"timestamp": "2025-09-03T11:10:56.885584Z", "level": "INFO", "logger": "security_middleware", "message": "Request ok: {\"timestamp\": \"2025-09-03T08:10:56.885525\", \"client_ip\": \"127.0.0.1\", \"method\": \"GET\", \"path\": \"/health/detailed\", \"status_code\": 200, \"duration_ms\": 115.74, \"user_agent\": \"curl/7.88.1\", \"referer\": \"\"}", "module": "security_middleware", "function": "_log_request", "line": 438, "process_id": 2783414, "thread_id": 139842666655808}
INFO:     127.0.0.1:46438 - "GET /health/detailed HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
{"timestamp": "2025-09-03T11:15:05.574742Z", "level": "INFO", "logger": "__main__", "message": "Iniciando shutdown graceful...", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "app_shutdown_start", "component": "server"}}
{"timestamp": "2025-09-03T11:15:05.575197Z", "level": "INFO", "logger": "__main__", "message": "Encerrando sess√µes ativas...", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "sessions_cleanup", "component": "session_manager", "active_sessions_count": 0}}
{"timestamp": "2025-09-03T11:15:05.575372Z", "level": "INFO", "logger": "fallback_system", "message": "Cache limpo", "module": "fallback_system", "function": "clear", "line": 78, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:15:05.575699Z", "level": "INFO", "logger": "fallback_system", "message": "Estat√≠sticas de fallback resetadas", "module": "fallback_system", "function": "reset_stats", "line": 332, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:15:05.575838Z", "level": "INFO", "logger": "__main__", "message": "Recursos de estabilidade limpos", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "stability_cleanup", "cache_items_cleared": 0, "fallback_stats_reset": true}}
{"timestamp": "2025-09-03T11:15:05.575994Z", "level": "INFO", "logger": "session_recovery", "message": "Encerrando sistema de recupera√ß√£o de sess√µes...", "module": "session_recovery", "function": "shutdown", "line": 276, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:15:05.576231Z", "level": "INFO", "logger": "session_recovery", "message": "Sistema de recupera√ß√£o encerrado", "module": "session_recovery", "function": "shutdown", "line": 290, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:15:05.576315Z", "level": "INFO", "logger": "__main__", "message": "Sistema de recupera√ß√£o de sess√µes encerrado", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808}
{"timestamp": "2025-09-03T11:15:05.576374Z", "level": "INFO", "logger": "__main__", "message": "Sess√µes encerradas e recursos limpos", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "sessions_closed", "component": "session_manager"}}
{"timestamp": "2025-09-03T11:15:05.576440Z", "level": "INFO", "logger": "__main__", "message": "Shutdown conclu√≠do", "module": "logging_config", "function": "info", "line": 102, "process_id": 2783414, "thread_id": 139842666655808, "extra": {"event": "app_shutdown_complete", "component": "server"}}
INFO:     Application shutdown complete.
INFO:     Finished server process [2783414]
